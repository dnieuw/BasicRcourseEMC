<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Cleaning – Basic R Course</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./2-2_Datacleaning_practical.html" rel="next">
<link href="./1-10_Indexing_Subsetting_answers.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./2-1_Datacleaning.html">Data Cleaning</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Basic R Course</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/dnieuw/BasicRcourseEMC" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Basic-R-Course.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./1-1_Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction and History</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-2_Working_with_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Importing and Saving Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-3_Working_with_R_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working with R - Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-4_Working_with_R_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working with R - Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./1-5_Common_Objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Common Objects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-6_Common_Objects_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Common Objects - Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-7_Common_Objects_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Common Objects - Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./1-8_Indexing_Subsetting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indexing and Subsetting</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-9_Indexing_Subsetting_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indexing and Subsetting - Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1-10_Indexing_Subsetting_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Indexing and Subsetting - Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./2-1_Datacleaning.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Cleaning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-2_Datacleaning_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning - Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-3_Datacleaning_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Cleaning - Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./2-4_Analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-5_Analysis_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis - Practical</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-6_Analysis_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis - Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./2-7_Basic_plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic plotting</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-8_Basic_plotting_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic Plotting: Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-9_Basic_plotting_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic Plotting: Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./2-10_ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data visualization using ggplot2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-11_ggplot2_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot: Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2-12_ggplot2_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot: Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./3-1_Functions1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions 1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-2_Functions1_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions1: Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-3_Functions1_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions1: Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./3-4_Functions2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions 2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-5_Functions2_practical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions2: Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3-6_Functions2_answers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functions2: Answers</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./4-1_represearch.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reproducible research</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-2_basic_markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-3_codeblocks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Blocks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-4_basic_markdown_practicals_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Markdown: Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-5_basic_markdown_practicals_hints.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Markdown: Hints</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-6_basic_markdown_practicals_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solution Rmarkdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-7_shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-8_shiny_practicals_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shiny: Questions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./4-9_looseends.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loose ends</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4-10_tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidyverse</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#messy-data-vs-tidy-data" id="toc-messy-data-vs-tidy-data" class="nav-link active" data-scroll-target="#messy-data-vs-tidy-data">Messy data vs tidy data</a></li>
  <li><a href="#prepare-data-set-for-analysis" id="toc-prepare-data-set-for-analysis" class="nav-link" data-scroll-target="#prepare-data-set-for-analysis">Prepare data set for analysis</a>
  <ul class="collapse">
  <li><a href="#first-look-of-your-data" id="toc-first-look-of-your-data" class="nav-link" data-scroll-target="#first-look-of-your-data">First look of your data</a></li>
  <li><a href="#rename-variables" id="toc-rename-variables" class="nav-link" data-scroll-target="#rename-variables">Rename variables</a></li>
  <li><a href="#change-type-of-variable" id="toc-change-type-of-variable" class="nav-link" data-scroll-target="#change-type-of-variable">Change type of variable</a></li>
  <li><a href="#round-variables" id="toc-round-variables" class="nav-link" data-scroll-target="#round-variables">Round variables</a></li>
  <li><a href="#transform-variables" id="toc-transform-variables" class="nav-link" data-scroll-target="#transform-variables">Transform variables</a></li>
  <li><a href="#make-a-subset-of-your-data" id="toc-make-a-subset-of-your-data" class="nav-link" data-scroll-target="#make-a-subset-of-your-data">Make a subset of your data</a></li>
  <li><a href="#longitudinal-data" id="toc-longitudinal-data" class="nav-link" data-scroll-target="#longitudinal-data">Longitudinal data</a></li>
  <li><a href="#merge-data-sets" id="toc-merge-data-sets" class="nav-link" data-scroll-target="#merge-data-sets">Merge data sets</a></li>
  </ul></li>
  <li><a href="#explore-data-set" id="toc-explore-data-set" class="nav-link" data-scroll-target="#explore-data-set">Explore data set</a>
  <ul class="collapse">
  <li><a href="#obtain-the-summaries-of-each-variable" id="toc-obtain-the-summaries-of-each-variable" class="nav-link" data-scroll-target="#obtain-the-summaries-of-each-variable">Obtain the summaries of each variable</a></li>
  <li><a href="#obtain-the-summaries-of-one-variable" id="toc-obtain-the-summaries-of-one-variable" class="nav-link" data-scroll-target="#obtain-the-summaries-of-one-variable">Obtain the summaries of one variable</a></li>
  <li><a href="#get-the-other-summary-statisitics" id="toc-get-the-other-summary-statisitics" class="nav-link" data-scroll-target="#get-the-other-summary-statisitics">Get the other summary statisitics</a></li>
  <li><a href="#get-summary-statistics-per-group" id="toc-get-summary-statistics-per-group" class="nav-link" data-scroll-target="#get-summary-statistics-per-group">Get summary statistics per group</a></li>
  <li><a href="#frequency-tables" id="toc-frequency-tables" class="nav-link" data-scroll-target="#frequency-tables">Frequency tables</a></li>
  <li><a href="#crosstabs" id="toc-crosstabs" class="nav-link" data-scroll-target="#crosstabs">Crosstabs</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/dnieuw/BasicRcourseEMC/edit/main/2-1_Datacleaning.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="messy-data-vs-tidy-data" class="level2">
<h2 class="anchored" data-anchor-id="messy-data-vs-tidy-data">Messy data vs tidy data</h2>
<p>The data set that you have, is often not ready to perform analyses on. You will need to perform some steps to clean up your data.</p>
<p>Be aware that this can be a time consuming task! The amount of time and code you will spend on <em>data cleaning</em>, can be a lot larger than the actual analysis.</p>
<p>Remember that R solely works with syntax. This means that you cannot adjust data manually and you will always have code to reproduce your results.</p>
<p>So, if the source data file gets adjusted slightly - say new patients are added, or some measurements are corrected - you just run your code and all your data preparation steps are performed automatically!</p>
<p>First of all we need to make sure data is in a tidy format. Tidy format:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/tidy-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:150.0%"></p>
</figure>
</div>
</div>
</div>
<p>Make sure that your data is structured so that:</p>
<ul>
<li><p>Each variable forms a column</p></li>
<li><p>Each observation forms a row</p></li>
<li><p>Each cell is a single measurement</p></li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If possible; make sure you already think about your analysis when collecting the data. A protocol and statistical analysis plan are good ways to pre-specify your outcomes and variables. This way, you will need less data cleaning steps and save a lot of time.</p>
</div>
</div>
</section>
<section id="prepare-data-set-for-analysis" class="level2">
<h2 class="anchored" data-anchor-id="prepare-data-set-for-analysis">Prepare data set for analysis</h2>
<section id="first-look-of-your-data" class="level3">
<h3 class="anchored" data-anchor-id="first-look-of-your-data">First look of your data</h3>
<p>Let’s explore a data set.</p>
<p>We will use a standard data set available in R (mtcars). Name this data set “data”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> mtcars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With the function <code>head</code>, the first 6 rows are printed. Here we can check the names of the variables and the first entries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
</div>
<p>The number of rows can be adjusted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4     21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710    22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</code></pre>
</div>
</div>
<p><code>tail</code> reports the last 6 rows of the data set</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt qsec vs am gear carb
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2</code></pre>
</div>
</div>
<p>Other useful functions for the first glimpse of your data set:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>View</code> opens the data set</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 32 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
</div>
<p>Obtain the variable names</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear"
[11] "carb"</code></pre>
</div>
</div>
</section>
<section id="rename-variables" class="level3">
<h3 class="anchored" data-anchor-id="rename-variables">Rename variables</h3>
<p>In case there are inconvenient names in your variables, change them:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)[<span class="fu">names</span>(data) <span class="sc">==</span> <span class="st">"carb"</span>] <span class="ot">&lt;-</span> <span class="st">"CARB"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With this, we rename <code>carb</code> to <code>CARB</code>.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember: never use spaces or special characters in variable names!</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use unique but short names for your variables (and data sets)</p>
</div>
</div>
<p>This variable in a <code>test</code> data set is named very inconvenient, because there are spaces in the name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "miles per gallon" "cyl"              "disp"             "hp"              
 [5] "drat"             "wt"               "qsec"             "vs"              
 [9] "am"               "gear"             "CARB"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span><span class="st">`</span><span class="at">miles per gallon</span><span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
[16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
[31] 15.0 21.4</code></pre>
</div>
</div>
<p>Better rename it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(test)[<span class="fu">names</span>(test) <span class="sc">==</span> <span class="st">"miles per gallon"</span>] <span class="ot">&lt;-</span> <span class="st">"mpg"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="change-type-of-variable" class="level3">
<h3 class="anchored" data-anchor-id="change-type-of-variable">Change type of variable</h3>
<p>The type of your variable can be changed.</p>
<ul>
<li>From <code>numeric</code> to <code>factor</code></li>
</ul>
<p>Use variable <code>vs</code>, which is a numeric dummy variable (0/1).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>vs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:32] 0 0 1 1 0 1 0 1 1 1 ...</code></pre>
</div>
</div>
<p>Change it to a factor with <code>as.factor()</code>. (<code>factor()</code> is also possible)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_factor <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data<span class="sc">$</span>vs)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_factor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 0 1 1 0 1 0 1 1 1 1 0 0 0 0 0 0 1 1 1 1 0 0 0 0 1 0 1 0 0 0 1
Levels: 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>vs_factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "0","1": 1 1 2 2 1 2 1 2 2 2 ...</code></pre>
</div>
</div>
<ul>
<li>From <code>factor</code> to <code>numeric</code></li>
</ul>
<p>Change it back to numeric, with <code>as.numeric()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_numeric <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data<span class="sc">$</span>vs_factor)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_numeric</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 1 2 1 2 2 2 2 1 1 1 1 1 1 2 2 2 2 1 1 1 1 2 1 2 1 1 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>vs_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:32] 1 1 2 2 1 2 1 2 2 2 ...</code></pre>
</div>
</div>
<p>Notice how the values are now <code>1</code> and <code>2</code> instead of <code>0</code> and <code>1</code>. This is because in <code>vs_factor</code> the labels are <code>0</code> and <code>1</code>, but the underlying values were changed to <code>1</code> and <code>2</code>. To solve this we use the function <code>paste0</code>. Now <code>as.numeric()</code> takes the labels as values for the new numeric variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_numeric <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">paste0</span>(data<span class="sc">$</span>vs_factor))</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>vs_numeric</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 0 1 1 0 1 0 1 1 1 1 0 0 0 0 0 0 1 1 1 1 0 0 0 0 1 0 1 0 0 0 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>vs_numeric)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:32] 0 0 1 1 0 1 0 1 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="round-variables" class="level3">
<h3 class="anchored" data-anchor-id="round-variables">Round variables</h3>
<p>The function <code>round()</code> rounds variables to the specified number of digits. The default is 0</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 3 3 2 3 3 3 4 3 3 3 3 4 4 4 5 5 5 2 2 2 2 4 3 4 4 2 2 2 3 3 4 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(data<span class="sc">$</span>wt, <span class="at">digits =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2.6 2.9 2.3 3.2 3.4 3.5 3.6 3.2 3.1 3.4 3.4 4.1 3.7 3.8 5.2 5.4 5.3 2.2 1.6
[20] 1.8 2.5 3.5 3.4 3.8 3.8 1.9 2.1 1.5 3.2 2.8 3.6 2.8</code></pre>
</div>
</div>
<p>Similar functions are <code>ceiling()</code> and <code>floor()</code>. Can you guess what they do?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 3 3 3 4 4 4 4 4 4 4 4 5 4 4 6 6 6 3 2 2 3 4 4 4 4 2 3 2 4 3 4 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(data<span class="sc">$</span>wt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 2 2 2 3 3 3 3 3 3 3 3 4 3 3 5 5 5 2 1 1 2 3 3 3 3 1 2 1 3 2 3 2</code></pre>
</div>
</div>
</section>
<section id="transform-variables" class="level3">
<h3 class="anchored" data-anchor-id="transform-variables">Transform variables</h3>
<p>A new variable can be added to the data set, based on the values of an existing variable. For this we use the <code>$</code> symbol.</p>
<p>Some examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>cyl2 <span class="ot">&lt;-</span> data<span class="sc">$</span>cyl<span class="sc">+</span><span class="dv">2</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>hp10 <span class="ot">&lt;-</span> data<span class="sc">$</span>hp<span class="sc">/</span><span class="dv">10</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>cyl2_hp10 <span class="ot">&lt;-</span> data<span class="sc">$</span>cyl2 <span class="sc">*</span> data<span class="sc">$</span>hp10</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data[, <span class="fu">c</span>(<span class="st">"cyl"</span>, <span class="st">"hp"</span>,<span class="st">"cyl2"</span>, <span class="st">"hp10"</span>, <span class="st">"cyl2_hp10"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  cyl  hp cyl2 hp10 cyl2_hp10
Mazda RX4           6 110    8 11.0      88.0
Mazda RX4 Wag       6 110    8 11.0      88.0
Datsun 710          4  93    6  9.3      55.8
Hornet 4 Drive      6 110    8 11.0      88.0
Hornet Sportabout   8 175   10 17.5     175.0
Valiant             6 105    8 10.5      84.0</code></pre>
</div>
</div>
</section>
<section id="make-a-subset-of-your-data" class="level3">
<h3 class="anchored" data-anchor-id="make-a-subset-of-your-data">Make a subset of your data</h3>
<p>Remove observations with missings (<code>NA</code>) in “mpg” and “cyl”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, <span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>mpg) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>cyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a new data set with a new name. Otherwise you might lose important information in your data.</p>
</div>
</div>
<p>�</p>
<p>Make a new data set, including only mpg values &gt; 20. (Don’t forget the comma in the code!)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data[data<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">20</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>�</p>
<section id="remove-duplicates" class="level4">
<h4 class="anchored" data-anchor-id="remove-duplicates">Remove duplicates</h4>
<p>This can be used if there are multiple measurement per patient, but you want to keep only the first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data_short <span class="ot">&lt;-</span> data[<span class="sc">!</span><span class="fu">duplicated</span>(data<span class="sc">$</span>gear),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>�</p>
</section>
<section id="make-a-subset-remove-variables" class="level4">
<h4 class="anchored" data-anchor-id="make-a-subset-remove-variables">Make a subset: Remove variables</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(mpg, cyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="make-a-subset-keep-variables" class="level4">
<h4 class="anchored" data-anchor-id="make-a-subset-keep-variables">Make a subset: Keep variables</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data[, <span class="fu">c</span>(<span class="st">"mpg"</span>, <span class="st">"cyl"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Or:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, <span class="at">select =</span> <span class="fu">c</span>(mpg, cyl))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>�</p>
</section>
<section id="sort-data" class="level4">
<h4 class="anchored" data-anchor-id="sort-data">Sort data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> data[<span class="fu">order</span>(data<span class="sc">$</span>mpg),]</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg cyl disp  hp drat    wt  qsec vs am gear CARB
Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4
Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4
Camaro Z28          13.3   8  350 245 3.73 3.840 15.41  0  0    3    4
Duster 360          14.3   8  360 245 3.21 3.570 15.84  0  0    3    4
Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4
Maserati Bora       15.0   8  301 335 3.54 3.570 14.60  0  1    5    8
                    vs_factor vs_numeric cyl2 hp10 cyl2_hp10
Cadillac Fleetwood          0          0   10 20.5       205
Lincoln Continental         0          0   10 21.5       215
Camaro Z28                  0          0   10 24.5       245
Duster 360                  0          0   10 24.5       245
Chrysler Imperial           0          0   10 23.0       230
Maserati Bora               0          0   10 33.5       335</code></pre>
</div>
</div>
<p>�</p>
</section>
</section>
<section id="longitudinal-data" class="level3">
<h3 class="anchored" data-anchor-id="longitudinal-data">Longitudinal data</h3>
<p>With repeated measures, data can be in <code>long format</code> or <code>wide format</code>.</p>
<p>Wide format:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/Wide format.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p><br></p>
<p>Long format:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/Long format.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%"></p>
</figure>
</div>
</div>
</div>
<p>In wide format, the repeatedly measured variable has a new column for each measurement. In the long format, these measurements are placed in new rows. In the long format, each patient/observation will have multiple rows.</p>
<p>Here is an example of a dataset in long format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Orthodont, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Grouped Data: distance ~ age | Subject
   distance age Subject  Sex
1      26.0   8     M01 Male
2      25.0  10     M01 Male
3      29.0  12     M01 Male
4      31.0  14     M01 Male
5      21.5   8     M02 Male
6      22.5  10     M02 Male
7      23.0  12     M02 Male
8      26.5  14     M02 Male
9      23.0   8     M03 Male
10     22.5  10     M03 Male</code></pre>
</div>
</div>
<p>Each subject (<code>M01</code>, <code>M02</code>, etc.) has 4 rows.</p>
<p>It depends on the analysis, which format is preferred and we might want to use this data in wide format. Use the function <code>dcast()</code> from the <code>data.table</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>Orthodont_w <span class="ot">&lt;-</span> <span class="fu">dcast</span>(<span class="fu">setDT</span>(Orthodont), Subject <span class="sc">+</span> Sex <span class="sc">~</span> age, <span class="at">value.var =</span> <span class="st">"distance"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>Subject</code> and <code>Sex</code> are measured only at baseline</li>
<li><code>age</code> indicates when the repeated measure is measured</li>
<li><code>distance</code> is the value of this measurement</li>
</ul>
<p><code>setDT()</code> is needed to make a <code>data.table</code> out of your data. This can be seen as an improved version of a <code>data.frame</code> object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Orthodont_w)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;Subject, Sex&gt;
   Subject    Sex     8    10    12    14
     &lt;ord&gt; &lt;fctr&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;
1:     M16   Male  22.0  21.5  23.5  25.0
2:     M05   Male  20.0  23.5  22.5  26.0
3:     M02   Male  21.5  22.5  23.0  26.5
4:     M11   Male  23.0  23.0  23.5  25.0
5:     M07   Male  22.0  22.0  24.5  26.5
6:     M08   Male  24.0  21.5  24.5  25.5</code></pre>
</div>
</div>
<p>Notice how the variables <code>age</code> and <code>distance</code> have been replaced with their values.</p>
<p>If I start with a data set in wide format, but need to transform it to long format, I use the function <code>melt()</code> (also from <code>data.table</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>Orthodont_L <span class="ot">&lt;-</span> <span class="fu">melt</span>(<span class="fu">setDT</span>(Orthodont_w), <span class="at">id =</span> <span class="fu">c</span>(<span class="st">"Subject"</span>, <span class="st">"Sex"</span>),</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">measure =</span><span class="fu">c</span>(<span class="st">"8"</span>, <span class="st">"10"</span>, <span class="st">"12"</span>, <span class="st">"14"</span>), </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">value.name =</span> <span class="st">"distance"</span>,</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">variable.name =</span> <span class="st">"age"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>id</code> denotes the variables that are only measured once (at baseline)</li>
<li><code>measure</code> are the variables that you want to stack</li>
<li><code>value.name</code> will be the variable name for the repeatedly measured variable</li>
<li><code>variable.name</code> will denote which measurement it is (age of patient)</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Orthodont_L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Subject    Sex    age distance
     &lt;ord&gt; &lt;fctr&gt; &lt;fctr&gt;    &lt;num&gt;
1:     M16   Male      8     22.0
2:     M05   Male      8     20.0
3:     M02   Male      8     21.5
4:     M11   Male      8     23.0
5:     M07   Male      8     22.0
6:     M08   Male      8     24.0</code></pre>
</div>
</div>
<p>It is possible to reshape with multiple repeated measurements. Here is an example of data where ferritin (<code>FER</code>) and creatinin (<code>CREA</code>) are measured twice.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  ID FER1 CREA1 FER2 CREA2
1  A   44  0.92  133  1.17
2  B  293  1.02  258  1.45
3  C  164  1.22   38  0.96
4  D   90  0.85  149  1.04</code></pre>
</div>
</div>
<p>The code below reshapes the data to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>dw.long <span class="ot">&lt;-</span> <span class="fu">melt</span>(<span class="fu">setDT</span>(dw), <span class="at">id =</span> <span class="st">"ID"</span>,</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">measure=</span><span class="fu">list</span>(<span class="fu">c</span>(<span class="st">"FER1"</span>, <span class="st">"FER2"</span>), <span class="fu">c</span>(<span class="st">"CREA1"</span>, <span class="st">"CREA2"</span>)), </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">value.name=</span><span class="fu">c</span>(<span class="st">'FER'</span>, <span class="st">'CREA'</span>),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable.name =</span> <span class="st">"Time"</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>dw.long</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       ID   Time   FER  CREA
   &lt;char&gt; &lt;fctr&gt; &lt;int&gt; &lt;num&gt;
1:      A      1    44  0.92
2:      B      1   293  1.02
3:      C      1   164  1.22
4:      D      1    90  0.85
5:      A      2   133  1.17
6:      B      2   258  1.45
7:      C      2    38  0.96
8:      D      2   149  1.04</code></pre>
</div>
</div>
<p>The function <code>patterns</code> can be used if my repeatedly measured variables are measured with high frequency. By using <code>patterns("age")</code>, all variables with <code>age</code> are stacked.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Key: &lt;Subject, Sex&gt;
   Subject    Sex age_8 age_10 age_12 age_14
     &lt;ord&gt; &lt;fctr&gt; &lt;num&gt;  &lt;num&gt;  &lt;num&gt;  &lt;num&gt;
1:     M16   Male  22.0   21.5   23.5   25.0
2:     M05   Male  20.0   23.5   22.5   26.0
3:     M02   Male  21.5   22.5   23.0   26.5
4:     M11   Male  23.0   23.0   23.5   25.0
5:     M07   Male  22.0   22.0   24.5   26.5
6:     M08   Male  24.0   21.5   24.5   25.5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>dw.long <span class="ot">&lt;-</span> <span class="fu">melt</span>(<span class="fu">setDT</span>(Orthodont_w), <span class="at">id =</span> <span class="fu">c</span>(<span class="st">"Subject"</span>, <span class="st">"Sex"</span>),</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">measure =</span> <span class="fu">patterns</span>(<span class="st">"age"</span>), </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">value.name =</span> <span class="st">"distance"</span>,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">variable.name =</span> <span class="st">"age"</span>)</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dw.long, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Subject    Sex    age distance
      &lt;ord&gt; &lt;fctr&gt; &lt;fctr&gt;    &lt;num&gt;
 1:     M16   Male  age_8     22.0
 2:     M05   Male  age_8     20.0
 3:     M02   Male  age_8     21.5
 4:     M11   Male  age_8     23.0
 5:     M07   Male  age_8     22.0
 6:     M08   Male  age_8     24.0
 7:     M03   Male  age_8     23.0
 8:     M12   Male  age_8     21.5
 9:     M13   Male  age_8     17.0
10:     M14   Male  age_8     22.5</code></pre>
</div>
</div>
</section>
<section id="merge-data-sets" class="level3">
<h3 class="anchored" data-anchor-id="merge-data-sets">Merge data sets</h3>
<p>Data sets can be combined in different ways.</p>
<ul>
<li>Add new observations (same variables)</li>
<li>Add new variables (same observations)</li>
<li>Complex combining</li>
</ul>
<p>Let us simulate a few separate data sets. With this code you can replicate the analyses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">61</span>) <span class="co"># To obtain the exact same numbers each time.</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>ID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>Center <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"Center 1"</span>,<span class="dv">10</span>), <span class="fu">rep</span>(<span class="st">"Center 2"</span>, <span class="dv">10</span>))</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>BMI <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">25</span>, <span class="at">sd =</span> <span class="dv">3</span>))</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>CRP <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="at">mean =</span> <span class="dv">80</span>, <span class="at">sd =</span> <span class="dv">30</span>))</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>Status <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"ICU"</span>, <span class="st">"Hospital"</span>, <span class="st">"Deceased"</span>), <span class="dv">20</span>, <span class="at">replace =</span> T)</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>df_1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> ID[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">Center =</span> Center[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">BMI =</span> BMI[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>],</span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>                   <span class="at">CRP =</span> CRP[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>df_2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> ID[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>], <span class="at">Center =</span> Center[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>], <span class="at">BMI =</span> BMI[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>],</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>                   <span class="at">CRP =</span> CRP[<span class="dv">11</span><span class="sc">:</span><span class="dv">20</span>])</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>df_3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> ID,  <span class="at">Status =</span> Status)</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>df_4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> <span class="fu">c</span>(ID[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>)],<span class="dv">21</span><span class="sc">:</span><span class="dv">25</span>), <span class="at">Status =</span> <span class="fu">c</span>(Status[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>)],</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"ICU"</span>, <span class="st">"Hospital"</span>, <span class="st">"Deceased"</span>), <span class="dv">5</span>, <span class="at">replace =</span> T)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="add-new-observations" class="level4">
<h4 class="anchored" data-anchor-id="add-new-observations">Add new observations</h4>
<p>Data <code>df_1</code> and <code>df_2</code> represent data from two centers (<code>Center 1</code> and <code>Center 2</code>). Both data sets have 10 observations and 2 baseline variables (<code>BMI</code> and <code>CRP</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>df_1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP
1   1 Center 1  24  84
2   2 Center 1  24  71
3   3 Center 1  20  63
4   4 Center 1  26 109
5   5 Center 1  21  86
6   6 Center 1  24 105
7   7 Center 1  27  96
8   8 Center 1  27  64
9   9 Center 1  29  67
10 10 Center 1  24 105</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>df_2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP
1  11 Center 2  21 117
2  12 Center 2  21  40
3  13 Center 2  26  88
4  14 Center 2  31  40
5  15 Center 2  21 128
6  16 Center 2  20  57
7  17 Center 2  26 135
8  18 Center 2  27  85
9  19 Center 2  27 108
10 20 Center 2  22  48</code></pre>
</div>
</div>
<p>We can paste them together with the function <code>merge()</code>. Create a new data set called <code>data_baseline</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>data_baseline <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_1, df_2, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_baseline)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  4 variables:
 $ ID    : int  1 2 3 4 5 6 7 8 9 10 ...
 $ Center: chr  "Center 1" "Center 1" "Center 1" "Center 1" ...
 $ BMI   : num  24 24 20 26 21 24 27 27 29 24 ...
 $ CRP   : num  84 71 63 109 86 105 96 64 67 105 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>data_baseline</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP
1   1 Center 1  24  84
2   2 Center 1  24  71
3   3 Center 1  20  63
4   4 Center 1  26 109
5   5 Center 1  21  86
6   6 Center 1  24 105
7   7 Center 1  27  96
8   8 Center 1  27  64
9   9 Center 1  29  67
10 10 Center 1  24 105
11 11 Center 2  21 117
12 12 Center 2  21  40
13 13 Center 2  26  88
14 14 Center 2  31  40
15 15 Center 2  21 128
16 16 Center 2  20  57
17 17 Center 2  26 135
18 18 Center 2  27  85
19 19 Center 2  27 108
20 20 Center 2  22  48</code></pre>
</div>
</div>
<p><code>data_baseline</code> now has all 20 observations.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The function <code>rbind()</code> can also be used, because this combines by pasting rows. You have to be careful to have the exact same variable names.</p>
</div>
</div>
</section>
<section id="add-variables" class="level4">
<h4 class="anchored" data-anchor-id="add-variables">Add variables</h4>
<p>For all 20 cases, a specific outcome (<code>Status</code>) is collected in a different data set (<code>df_3</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID   Status
1  1      ICU
2  2 Deceased
3  3      ICU
4  4      ICU
5  5 Deceased
6  6 Deceased</code></pre>
</div>
</div>
<p>We want to add the status to <code>data_baseline</code>. For this, we use the function <code>merge()</code> again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>data_complete <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_baseline, df_3, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data_complete)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   20 obs. of  5 variables:
 $ ID    : int  1 2 3 4 5 6 7 8 9 10 ...
 $ Center: chr  "Center 1" "Center 1" "Center 1" "Center 1" ...
 $ BMI   : num  24 24 20 26 21 24 27 27 29 24 ...
 $ CRP   : num  84 71 63 109 86 105 96 64 67 105 ...
 $ Status: chr  "ICU" "Deceased" "ICU" "ICU" ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>data_complete</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   5 Center 1  21  86 Deceased
6   6 Center 1  24 105 Deceased
7   7 Center 1  27  96      ICU
8   8 Center 1  27  64 Hospital
9   9 Center 1  29  67 Deceased
10 10 Center 1  24 105 Hospital
11 11 Center 2  21 117      ICU
12 12 Center 2  21  40 Hospital
13 13 Center 2  26  88      ICU
14 14 Center 2  31  40 Deceased
15 15 Center 2  21 128 Deceased
16 16 Center 2  20  57      ICU
17 17 Center 2  26 135 Hospital
18 18 Center 2  27  85 Hospital
19 19 Center 2  27 108 Hospital
20 20 Center 2  22  48      ICU</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can also use <code>cbind()</code> to add variables. Be very careful that your observations are in the exact same order. The function cbind does not match, but simply pastes variables to your data set.</p>
</div>
</div>
</section>
<section id="complex-merging" class="level4">
<h4 class="anchored" data-anchor-id="complex-merging">Complex merging</h4>
<p>Sometimes combining data sets is more complicated. In <code>data1</code> and <code>data2</code> examples below, there are differences in variables, but also cases. They can be merged in four different ways. Think beforehand which way is desirable for your analyses.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pictures/Merging.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p>The corresponding code to the four ways is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>data_inner <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID"</span>)                 <span class="co"># Inner join</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>data_left  <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)   <span class="co"># Left join</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>data_right <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)   <span class="co"># Right join</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>data_full  <span class="ot">&lt;-</span> <span class="fu">merge</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)     <span class="co"># Full join</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Say, we have to repeat the previous merging: we have the data <code>data_baseline</code> with our 20 observations and baseline covariates. The end point is in a separate data set (<code>df_4</code>), but now it does not include the same set of observations (some IDs are missing and others are extra).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>data_baseline</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP
1   1 Center 1  24  84
2   2 Center 1  24  71
3   3 Center 1  20  63
4   4 Center 1  26 109
5   5 Center 1  21  86
6   6 Center 1  24 105
7   7 Center 1  27  96
8   8 Center 1  27  64
9   9 Center 1  29  67
10 10 Center 1  24 105
11 11 Center 2  21 117
12 12 Center 2  21  40
13 13 Center 2  26  88
14 14 Center 2  31  40
15 15 Center 2  21 128
16 16 Center 2  20  57
17 17 Center 2  26 135
18 18 Center 2  27  85
19 19 Center 2  27 108
20 20 Center 2  22  48</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>df_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Status
1   1      ICU
2   2 Deceased
3   3      ICU
4   4      ICU
5   6 Deceased
6   7      ICU
7   8 Hospital
8   9 Deceased
9  11      ICU
10 12 Hospital
11 13      ICU
12 14 Deceased
13 16      ICU
14 17 Hospital
15 18 Hospital
16 19 Hospital
17 20      ICU
18 21 Deceased
19 22 Deceased
20 23      ICU
21 24 Hospital
22 25 Hospital</code></pre>
</div>
</div>
<p>Compare what the four different ways of merging do to the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>data_inner <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_baseline, df_4, <span class="at">by =</span> <span class="st">"ID"</span>)  </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>data_left <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_baseline, df_4, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)  </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>data_right <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_baseline, df_4, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)  </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>data_full <span class="ot">&lt;-</span> <span class="fu">merge</span>(data_baseline, df_4, <span class="at">by =</span> <span class="st">"ID"</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)  </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>data_inner</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   6 Center 1  24 105 Deceased
6   7 Center 1  27  96      ICU
7   8 Center 1  27  64 Hospital
8   9 Center 1  29  67 Deceased
9  11 Center 2  21 117      ICU
10 12 Center 2  21  40 Hospital
11 13 Center 2  26  88      ICU
12 14 Center 2  31  40 Deceased
13 16 Center 2  20  57      ICU
14 17 Center 2  26 135 Hospital
15 18 Center 2  27  85 Hospital
16 19 Center 2  27 108 Hospital
17 20 Center 2  22  48      ICU</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>data_left</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   5 Center 1  21  86     &lt;NA&gt;
6   6 Center 1  24 105 Deceased
7   7 Center 1  27  96      ICU
8   8 Center 1  27  64 Hospital
9   9 Center 1  29  67 Deceased
10 10 Center 1  24 105     &lt;NA&gt;
11 11 Center 2  21 117      ICU
12 12 Center 2  21  40 Hospital
13 13 Center 2  26  88      ICU
14 14 Center 2  31  40 Deceased
15 15 Center 2  21 128     &lt;NA&gt;
16 16 Center 2  20  57      ICU
17 17 Center 2  26 135 Hospital
18 18 Center 2  27  85 Hospital
19 19 Center 2  27 108 Hospital
20 20 Center 2  22  48      ICU</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>data_right</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   6 Center 1  24 105 Deceased
6   7 Center 1  27  96      ICU
7   8 Center 1  27  64 Hospital
8   9 Center 1  29  67 Deceased
9  11 Center 2  21 117      ICU
10 12 Center 2  21  40 Hospital
11 13 Center 2  26  88      ICU
12 14 Center 2  31  40 Deceased
13 16 Center 2  20  57      ICU
14 17 Center 2  26 135 Hospital
15 18 Center 2  27  85 Hospital
16 19 Center 2  27 108 Hospital
17 20 Center 2  22  48      ICU
18 21     &lt;NA&gt;  NA  NA Deceased
19 22     &lt;NA&gt;  NA  NA Deceased
20 23     &lt;NA&gt;  NA  NA      ICU
21 24     &lt;NA&gt;  NA  NA Hospital
22 25     &lt;NA&gt;  NA  NA Hospital</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>data_full</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   5 Center 1  21  86     &lt;NA&gt;
6   6 Center 1  24 105 Deceased
7   7 Center 1  27  96      ICU
8   8 Center 1  27  64 Hospital
9   9 Center 1  29  67 Deceased
10 10 Center 1  24 105     &lt;NA&gt;
11 11 Center 2  21 117      ICU
12 12 Center 2  21  40 Hospital
13 13 Center 2  26  88      ICU
14 14 Center 2  31  40 Deceased
15 15 Center 2  21 128     &lt;NA&gt;
16 16 Center 2  20  57      ICU
17 17 Center 2  26 135 Hospital
18 18 Center 2  27  85 Hospital
19 19 Center 2  27 108 Hospital
20 20 Center 2  22  48      ICU
21 21     &lt;NA&gt;  NA  NA Deceased
22 22     &lt;NA&gt;  NA  NA Deceased
23 23     &lt;NA&gt;  NA  NA      ICU
24 24     &lt;NA&gt;  NA  NA Hospital
25 25     &lt;NA&gt;  NA  NA Hospital</code></pre>
</div>
</div>
</section>
<section id="merge-multiple-data-sets" class="level4">
<h4 class="anchored" data-anchor-id="merge-multiple-data-sets">Merge multiple data sets</h4>
<p>It is possible to merge multiple data sets by creating a list of data set and using the function <code>Reduce()</code>. We can merge <code>df_1</code>, <code>df_2</code> and <code>df_3</code> in one go:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>df_list <span class="ot">&lt;-</span> <span class="fu">list</span>(df_1, df_2, df_3)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>df_complete <span class="ot">&lt;-</span> <span class="fu">Reduce</span>(<span class="cf">function</span>(x,y) <span class="fu">merge</span>(x,y, <span class="at">all =</span> <span class="cn">TRUE</span>), df_list)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>df_complete</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID   Center BMI CRP   Status
1   1 Center 1  24  84      ICU
2   2 Center 1  24  71 Deceased
3   3 Center 1  20  63      ICU
4   4 Center 1  26 109      ICU
5   5 Center 1  21  86 Deceased
6   6 Center 1  24 105 Deceased
7   7 Center 1  27  96      ICU
8   8 Center 1  27  64 Hospital
9   9 Center 1  29  67 Deceased
10 10 Center 1  24 105 Hospital
11 11 Center 2  21 117      ICU
12 12 Center 2  21  40 Hospital
13 13 Center 2  26  88      ICU
14 14 Center 2  31  40 Deceased
15 15 Center 2  21 128 Deceased
16 16 Center 2  20  57      ICU
17 17 Center 2  26 135 Hospital
18 18 Center 2  27  85 Hospital
19 19 Center 2  27 108 Hospital
20 20 Center 2  22  48      ICU</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>After the lectures on functions, the function will make more sense!</p>
</div>
</div>
</section>
</section>
</section>
<section id="explore-data-set" class="level2">
<h2 class="anchored" data-anchor-id="explore-data-set">Explore data set</h2>
<section id="obtain-the-summaries-of-each-variable" class="level3">
<h3 class="anchored" data-anchor-id="obtain-the-summaries-of-each-variable">Obtain the summaries of each variable</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      mpg             cyl             disp             hp       
 Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
 1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
 Median :19.20   Median :6.000   Median :196.3   Median :123.0  
 Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
 3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
 Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
      drat             wt             qsec             vs        
 Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
 1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
 Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
 Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
 3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
 Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
       am              gear            CARB       vs_factor   vs_numeric    
 Min.   :0.0000   Min.   :3.000   Min.   :1.000   0:18      Min.   :0.0000  
 1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000   1:14      1st Qu.:0.0000  
 Median :0.0000   Median :4.000   Median :2.000             Median :0.0000  
 Mean   :0.4062   Mean   :3.688   Mean   :2.812             Mean   :0.4375  
 3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000             3rd Qu.:1.0000  
 Max.   :1.0000   Max.   :5.000   Max.   :8.000             Max.   :1.0000  
      cyl2             hp10         cyl2_hp10    
 Min.   : 6.000   Min.   : 5.20   Min.   : 31.2  
 1st Qu.: 6.000   1st Qu.: 9.65   1st Qu.: 57.9  
 Median : 8.000   Median :12.30   Median : 98.4  
 Mean   : 8.188   Mean   :14.67   Mean   :130.0  
 3rd Qu.:10.000   3rd Qu.:18.00   3rd Qu.:180.0  
 Max.   :10.000   Max.   :33.50   Max.   :335.0  </code></pre>
</div>
</div>
<p>�</p>
</section>
<section id="obtain-the-summaries-of-one-variable" class="level3">
<h3 class="anchored" data-anchor-id="obtain-the-summaries-of-one-variable">Obtain the summaries of one variable</h3>
<p>With the <code>$</code> symbol we access a variable in a data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  10.40   15.43   19.20   20.09   22.80   33.90 </code></pre>
</div>
</div>
<p>With <code>summary()</code>, we can also look at the outliers and the missings (<code>NA</code>).</p>
</section>
<section id="get-the-other-summary-statisitics" class="level3">
<h3 class="anchored" data-anchor-id="get-the-other-summary-statisitics">Get the other summary statisitics</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(data<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20.09062</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(data<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.026948</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(data<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 19.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(data<span class="sc">$</span>mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    0%    25%    50%    75%   100% 
10.400 15.425 19.200 22.800 33.900 </code></pre>
</div>
</div>
</section>
<section id="get-summary-statistics-per-group" class="level3">
<h3 class="anchored" data-anchor-id="get-summary-statistics-per-group">Get summary statistics per group</h3>
<p>Use the function aggregate to obtain your summary statistics per group.</p>
<p>The last element in the function specifies what you want to calculate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(mpg <span class="sc">~</span> vs, <span class="at">data =</span> data, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vs      mpg
1  0 16.61667
2  1 24.55714</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(mpg <span class="sc">~</span> vs, <span class="at">data =</span> data, sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vs      mpg
1  0 3.860699
2  1 5.378978</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(mpg <span class="sc">~</span> vs, <span class="at">data =</span> data, median)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vs   mpg
1  0 15.65
2  1 22.80</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(mpg <span class="sc">~</span> vs, <span class="at">data =</span> data, summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vs mpg.Min. mpg.1st Qu. mpg.Median mpg.Mean mpg.3rd Qu. mpg.Max.
1  0 10.40000    14.77500   15.65000 16.61667    19.07500 26.00000
2  1 17.80000    21.40000   22.80000 24.55714    29.62500 33.90000</code></pre>
</div>
</div>
</section>
<section id="frequency-tables" class="level3">
<h3 class="anchored" data-anchor-id="frequency-tables">Frequency tables</h3>
<p>Use the function <code>table()</code> for this</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>vs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 0  1 
18 14 </code></pre>
</div>
</div>
<p><code>prop.table()</code> gives us proportions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(data<span class="sc">$</span>vs))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     0      1 
0.5625 0.4375 </code></pre>
</div>
</div>
<p>Notice how I need to use the function <code>table()</code> inside <code>prop.table()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> <span class="fu">table</span>(data<span class="sc">$</span>vs)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(tab1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     0      1 
0.5625 0.4375 </code></pre>
</div>
</div>
<p>Manually, I can multiply the proportions to obtain percentages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">prop.table</span>(tab1)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   0    1 
56.2 43.8 </code></pre>
</div>
</div>
</section>
<section id="crosstabs" class="level3">
<h3 class="anchored" data-anchor-id="crosstabs">Crosstabs</h3>
<p>To investigate two categorical variables, I again use the function <code>table()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>vs, data<span class="sc">$</span>gear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   
     3  4  5
  0 12  2  4
  1  3 10  1</code></pre>
</div>
</div>
<p>This functions do not provide me with the variable names, so can be tricky to interpret this. The function <code>with()</code> can help with that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(data, <span class="fu">table</span>(vs, gear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gear
vs   3  4  5
  0 12  2  4
  1  3 10  1</code></pre>
</div>
</div>
<p>Again use <code>prop.table()</code> for the proportions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>tab2 <span class="ot">&lt;-</span> <span class="fu">with</span>(data, <span class="fu">table</span>(vs, gear))</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(tab2) <span class="co"># cell percentages</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gear
vs        3       4       5
  0 0.37500 0.06250 0.12500
  1 0.09375 0.31250 0.03125</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(tab2, <span class="dv">1</span>) <span class="co"># row percentages</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gear
vs           3          4          5
  0 0.66666667 0.11111111 0.22222222
  1 0.21428571 0.71428571 0.07142857</code></pre>
</div>
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(tab2, <span class="dv">2</span>) <span class="co"># column percentages</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   gear
vs          3         4         5
  0 0.8000000 0.1666667 0.8000000
  1 0.2000000 0.8333333 0.2000000</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./1-10_Indexing_Subsetting_answers.html" class="pagination-link" aria-label="Indexing and Subsetting - Answers">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Indexing and Subsetting - Answers</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./2-2_Datacleaning_practical.html" class="pagination-link" aria-label="Data Cleaning - Practical">
        <span class="nav-page-text">Data Cleaning - Practical</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/dnieuw/BasicRcourseEMC/edit/main/2-1_Datacleaning.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>